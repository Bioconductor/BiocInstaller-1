<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="BiocManager">
<title>Installing and Managing _Bioconductor_ Packages • BiocManager</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Installing and Managing _Bioconductor_ Packages">
<meta property="og:description" content="BiocManager">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BiocManager</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.30.22.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/BiocManager.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Bioconductor/BiocManager/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Installing and Managing _Bioconductor_ Packages</h1>
                        <h4 data-toc-skip class="author">Marcel
Ramos</h4>
            <address class="author_afil">
      Roswell Park Comprehensive Cancer Center, Buffalo,
NY<br><h4 data-toc-skip class="author">Martin
Morgan</h4>
            <address class="author_afil">
      Roswell Park Comprehensive Cancer Center, Buffalo,
NY<br><small class="dont-index">Source: <a href="https://github.com/Bioconductor/BiocManager/blob/HEAD/vignettes/BiocManager.Rmd" class="external-link"><code>vignettes/BiocManager.Rmd</code></a></small>
      <div class="d-none name"><code>BiocManager.Rmd</code></div>
    </address>
</address>
</div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Use the <a href="https://cran.r-project.org/package=BiocManager" class="external-link">BiocManager</a>
package to install and manage packages from the <em><a href="https://bioconductor.org" class="external-link">Bioconductor</a></em> project for the
statistical analysis and comprehension of high-throughput genomic
data.</p>
<p>Current <em>Bioconductor</em> packages are available on a ‘release’
version intended for every-day use, and a ‘devel’ version where new
features are introduced. A new release version is created every six
months. Using the <a href="https://cran.r-project.org/package=BiocManager" class="external-link">BiocManager</a>
package helps users install packages from the same release.</p>
</div>
<div class="section level2">
<h2 id="basic-use">Basic use<a class="anchor" aria-label="anchor" href="#basic-use"></a>
</h2>
<div class="section level3">
<h3 id="installing-r">Installing <em>R</em><a class="anchor" aria-label="anchor" href="#installing-r"></a>
</h3>
<p>We recommend using the current ‘release’ version of <em>R</em>. <a href="https://cran.R-project.org/" class="external-link">Follow instructions</a> for
installing <em>R</em>.</p>
</div>
<div class="section level3">
<h3 id="installing-biocmanager">Installing <em>BiocManager</em><a class="anchor" aria-label="anchor" href="#installing-biocmanager"></a>
</h3>
<p>Use standard <em>R</em> installation procedures to install the <a href="https://cran.r-project.org/package=BiocManager" class="external-link">BiocManager</a>
package. This command is requried only once per <em>R</em>
installation.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, repos <span class="op">=</span> <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="installing-bioconductor-cran-or-github-packages">Installing <em>Bioconductor</em>, <em>CRAN</em>, or GitHub
packages<a class="anchor" aria-label="anchor" href="#installing-bioconductor-cran-or-github-packages"></a>
</h3>
<p>Install <em>Bioconductor</em> (or CRAN) packages with</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/install.html">install</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GenomicRanges"</span>, <span class="st">"Organism.dplyr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Installed packages can be updated to their current version with</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/install.html">install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="previous-releases">Previous releases<a class="anchor" aria-label="anchor" href="#previous-releases"></a>
</h3>
<p>To install CRAN package versions consistent with previous releases of
Bioconductor, use the <a href="https://github.com/Bioconductor/BiocArchive" class="external-link">BiocArchive</a>
package. BiocArchive enables contemporary installations of CRAN packages
with out-of-date <em>Bioconductor</em> releases using <a href="https://packagemanager.posit.co/" class="external-link">Posit Package Manager</a>.</p>
</div>
<div class="section level3">
<h3 id="version-and-validity-of-installations">Version and validity of installations<a class="anchor" aria-label="anchor" href="#version-and-validity-of-installations"></a>
</h3>
<p>Use <code><a href="../reference/version.html">version()</a></code> to discover the version of
<em>Bioconductor</em> currently in use.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/version.html">version</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><em>Bioconductor</em> packages work best when they are all from the
same release. Use <code><a href="../reference/valid.html">valid()</a></code> to identify packages that are
out-of-date or from unexpected versions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/valid.html">valid</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="../reference/valid.html">valid()</a></code> returns an object that can be queried for
detailed information about invalid packages, as illustrated in the
following screen capture</p>
<pre><code>&gt; v &lt;- valid()
Warning message:
6 packages out-of-date; 0 packages too new
&gt; names(v)
[1] "out_of_date" "too_new"
&gt; head(v$out_of_date, 2)
    Package LibPath
bit "bit"   "/home/mtmorgan/R/x86_64-pc-linux-gnu-library/3.5-Bioc-3.8"
ff  "ff"    "/home/mtmorgan/R/x86_64-pc-linux-gnu-library/3.5-Bioc-3.8"
    Installed Built   ReposVer Repository
bit "1.1-12"  "3.5.0" "1.1-13" "https://cloud.r-project.org/src/contrib"
ff  "2.2-13"  "3.5.0" "2.2-14" "https://cloud.r-project.org/src/contrib"
&gt;</code></pre>
</div>
<div class="section level3">
<h3 id="available-packages">Available packages<a class="anchor" aria-label="anchor" href="#available-packages"></a>
</h3>
<p>Packages available for your version of <em>Bioconductor</em> can be
discovered with <code><a href="../reference/available.html">available()</a></code>; the first argument can be used
to filter package names based on a regular expression, e.g., ‘BSgenome’
package available for <em>Homo sapiens</em></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avail</span> <span class="op">&lt;-</span> <span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/available.html">available</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">avail</span><span class="op">)</span>                               <span class="co"># all CRAN &amp; Bioconductor packages</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/available.html">available</a></span><span class="op">(</span><span class="st">"BSgenome.Hsapiens"</span><span class="op">)</span> <span class="co"># BSgenome.Hsapiens.* packages</span></span></code></pre></div>
<p>Questions about installing and managing <em>Bioconductor</em>
packages should be addressed to the <a href="https://support.bioconductor.org" class="external-link"><em>Bioconductor</em> support
site</a>.</p>
</div>
<div class="section level3">
<h3 id="updating-old-packages">Updating old packages<a class="anchor" aria-label="anchor" href="#updating-old-packages"></a>
</h3>
<p>The user can often get an update packages prompt similar to:</p>
<pre><code>&gt; BiocManager::install("AnVIL")
Bioconductor version 3.18 (BiocManager 1.30.22), R 4.3.1 (2023-06-16)
Old packages: 'AnnotationDbi', 'arrow', 'basilisk.utils', 'beachmat',
  'BiocParallel', 'BiocSingular', 'biocthis', 'Biostrings', 'bluster',
  'DelayedArray', 'downlit', 'edgeR', 'GenomeInfoDb', 'GenomicFeatures',
  'IRanges', 'limma', 'pkgbuild', 'pkgload', 'processx', 'RcppSpdlog', 'rhdf5',
  'rstudioapi', 'SingleR', 'testthat', 'usethis', 'xml2', 'KernSmooth',
  'Matrix', 'mgcv'
Update all/some/none? [a/s/n]: </code></pre>
<p>A decision should be made regarding updating packages. In the
following section we will detail the rationale, pros, and cons of
updating packages.</p>
<p>(An initial draft of this section was produced by ChatGPT on 28
August 2023)</p>
<div class="section level4">
<h4 id="rationale">Rationale<a class="anchor" aria-label="anchor" href="#rationale"></a>
</h4>
<p>Package updates often include bug fixes, improvements in
functionality, and optimizations. By updating, the user can ensure that
they are benefiting from the latest enhancements and fixes in the
packages they use.</p>
</div>
<div class="section level4">
<h4 id="pros-of-updating">Pros of updating<a class="anchor" aria-label="anchor" href="#pros-of-updating"></a>
</h4>
<ul>
<li>
<strong>Bug Fixes</strong>: Updating packages can resolve known
issues and bugs present in older versions. This can lead to more
accurate and reliable analyses.</li>
<li>
<strong>Performance</strong>: Package updates might come with
performance optimizations that can lead to faster execution of code and
analyses.</li>
<li>
<strong>New Features</strong>: Updated packages might introduce new
features, functions, and capabilities that can enhance your workflow and
analysis options.</li>
<li>
<strong>Compatibility</strong>: Newer packages are often developed
with compatibility in mind. Using outdated packages might lead to
compatibility issues with other packages or R itself.</li>
<li>
<strong>Security</strong>: In some cases, package updates address
security vulnerabilities. Keeping packages up to date can help maintain
the security of the computational environment.</li>
<li>
<strong>Documentation</strong>: Newer versions of packages might
come with updated documentation that reflects recent changes and
improvements in package functionality.</li>
</ul>
</div>
<div class="section level4">
<h4 id="cons-of-updating">Cons of updating<a class="anchor" aria-label="anchor" href="#cons-of-updating"></a>
</h4>
<ul>
<li>
<strong>Code Breakage</strong>: Updates can introduce changes in
package behavior, function signatures, or syntax. This can potentially
break existing code if it relies on the previous behavior.</li>
<li>
<strong>Version Conflicts</strong>: Updates to one package might
trigger dependencies on updated versions of other packages. This can
lead to conflicts if those updated versions are not compatible with
other parts of your workflow.</li>
<li>
<strong>Workflow Disruption</strong>: When you update packages, you
might need to retest and validate your analyses to ensure that the
changes in package behavior don’t affect your results.</li>
<li>
<strong>Learning Curve</strong>: New features and changes introduced
in updated packages might require you to invest time in understanding
how to use them effectively.</li>
<li>
<strong>Temporary Instability</strong>: Right after a major update,
the new version might not be as stable as the previous one, leading to
unexpected behavior.</li>
</ul>
</div>
<div class="section level4">
<h4 id="balancing-the-decision">Balancing the Decision<a class="anchor" aria-label="anchor" href="#balancing-the-decision"></a>
</h4>
<ul>
<li>Consider how critical the package is to your analysis. If a package
is central to your workflow, updating might be more important.</li>
<li>Read the release notes of the package to understand what changes are
introduced in the update.</li>
<li>Consider using a separate environment (e.g., Docker container) for
testing updates before applying them to the main analysis
environment.</li>
<li>Make sure to backup code and data before performing updates.</li>
<li>Check if there are any compatibility issues with other packages you
are using.</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="advanced-use">Advanced use<a class="anchor" aria-label="anchor" href="#advanced-use"></a>
</h2>
<div class="section level3">
<h3 id="changing-version">Changing version<a class="anchor" aria-label="anchor" href="#changing-version"></a>
</h3>
<p>Use the <code>version=</code> argument to update all packages to a
specific <em>Bioconductor</em> version</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/install.html">install</a></span><span class="op">(</span>version<span class="op">=</span><span class="st">"3.7"</span><span class="op">)</span></span></code></pre></div>
<p><em>Bioconductor</em> versions are associated with specific
<em>R</em> versions, as summarized <a href="https://bioconductor.org/about/release-announcements/" class="external-link">here</a>.
Attempting to install a version of <em>Bioconductor</em> that is not
supported by the version of <em>R</em> in use leads to an error; using
the most recent version of <em>Bioconductor</em> may require installing
a new version of <em>R</em>.</p>
<pre><code>&gt; BiocManager::install(version="3.9")
Error: Bioconductor version '3.9' requires R version '3.6'; see
  https://bioconductor.org/install</code></pre>
<p>A special version, <code>version="devel"</code>, allows use of
<em>Bioconductor</em> packages that are under development.</p>
</div>
<div class="section level3">
<h3 id="multiple-versions">Managing multiple versions<a class="anchor" aria-label="anchor" href="#multiple-versions"></a>
</h3>
<p>It is possible to have multiple versions of <em>Bioconductor</em>
installed on the same computer. A best practice is to <a href="https://cran.R-project.org/" class="external-link">create an initial <em>R</em>
installation</a>. Then create and use a library for each version of
<em>Bioconductor</em>. The library will contain all
<em>Bioconductor</em>, CRAN, and other packages for that version of
<em>Bioconductor</em>. We illustrate the process assuming use of
<em>Bioconductor</em> version 3.7, available using <em>R</em> version
3.5</p>
<p>Create a directory to contain the library (replace
<code>USER_NAME</code> with your user name on Windows)</p>
<ul>
<li>Linux: <code>~/R/3.5-Bioc-3.7</code>
</li>
<li>macOS: <code>~/Library/R/3.5-Bioc-3.7/library</code>
</li>
<li>Windows:
<code>C:\Users\USER_NAME\Documents\R\3.5-Bioc-3.7</code>
</li>
</ul>
<p>Set the environment variable <code>R_LIBS_USER</code> to this
directory, and invoke <em>R</em>. Command line examples for Linux
are</p>
<ul>
<li>Linux: <code>R_LIBS_USER=~/R/3.5-Bioc-3.7 R</code>
</li>
<li>macOS:
<code>R_LIBS_USER=~/Library/R/3.5-Bioc-3.7/library R</code>
</li>
<li>Windows:
<code>cmd /C "set R_LIBS_USER=C:\Users\USER_NAME\Documents\R\3.5-Bioc-3.7 &amp;&amp; R"</code>
</li>
</ul>
<p>Once in <em>R</em>, confirm that the version-specific library path
has been set</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>On Linux and macOS, create a bash alias to save typing, e.g.,</p>
<ul>
<li>Linux:
<code>alias Bioc3.7='R_LIBS_USER=~/R/3.5-Bioc-3.7 R'</code>
</li>
<li>macOS:
<code>alias Bioc3.7='R_LIBS_USER=~/Library/R/3.5-Bioc-3.7/library R'</code>
</li>
</ul>
<p>Invoke these from the command line as <code>Bioc3.7</code>.</p>
<p>On Windows, create a shortcut. Go to My Computer and navigate to a
directory that is in your PATH. Then right-click and choose
New-&gt;Shortcut. In the “type the location of the item” box, put:</p>
<pre><code>cmd /C "set R_LIBS_USER=C:\Users\USER_NAME\Documents\R\3.5-Bioc-3.7 &amp;&amp; R"</code></pre>
<p>Click “Next”. In the “Type a name for this shortcut” box, type
<code>Bioc-3.7</code>.</p>
</div>
<div class="section level3">
<h3 id="offline-use">Offline use<a class="anchor" aria-label="anchor" href="#offline-use"></a>
</h3>
<p>Offline use of <em>BiocManager</em> is possible for organizations and
users that would like to provide access to internal repositories of
<em>Bioconductor</em> packages while enforcing appropriate version
checks between Bioconductor and R. For offline use, organizations and
users require the following steps:</p>
<ol style="list-style-type: decimal">
<li>
<p>Use <code>rsync</code> to create local repositories of <a href="https://cran.r-project.org/mirror-howto.html" class="external-link">CRAN</a> and <a href="https://bioconductor.org/about/mirrors/mirror-how-to/" class="external-link">Bioconductor</a>.
Tell <em>R</em> about these repositories using (e.g., in a site-wide
<code>.Rprofile</code>, see <code><a href="https://rdrr.io/r/base/Startup.html" class="external-link">?.Rprofile</a></code>).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>    repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>CRAN_mirror <span class="op">=</span> <span class="st">"file:///path/to/CRAN-mirror"</span><span class="op">)</span>,</span>
<span>    BioC_mirror <span class="op">=</span> <span class="st">"file:///path/to/Bioc-mirror"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Validate repository setting by reviewing the output of
<code><a href="../reference/repositories.html">repositories()</a></code>.</p>
</li>
<li>
<p>Create an environment variable or option, e.g.,</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>    BIOCONDUCTOR_ONLINE_VERSION_DIAGNOSIS <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Use <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> to bootstrap the BiocManager
installation.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.package</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BiocManager"</span>, <span class="st">"BiocVersion"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
<p>BiocManager can then be used for subsequent installations, e.g.,
<code>BiocManager::install(c("ggplot2", "GenomicRanges"))</code>.</p>
<div class="section level4">
<h4 id="offline-config-yaml">Offline config.yaml<a class="anchor" aria-label="anchor" href="#offline-config-yaml"></a>
</h4>
<p><em>BiocManager</em> also expects to reference an online
configuration yaml file for <em>Bioconductor</em> version validation at
<a href="https://bioconductor.org/config.yaml" class="external-link uri">https://bioconductor.org/config.yaml</a>. With offline use,
users are expected to either host this file locally or provide their
<code>config.yaml</code> version. The package allows either an
environment variable or R-specific option to locate this file, e.g.,</p>
<pre><code>```r
options(
    BIOCONDUCTOR_CONFIG_FILE = "file:///path/to/config.yaml"
)
```</code></pre>
</div>
</div>
</div>
<div class="section level2">
<h2 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h2>
<p>BiocManager’s job is to make sure that all packages are installed
from the same <em>Bioconductor</em> version, using compatible <em>R</em>
and <em>CRAN</em> packages. However, <em>R</em> has an annual release
cycle, whereas <em>Bioconductor</em> has a twice-yearly release cycle.
Also, <em>Bioconductor</em> has a ‘devel’ branch where new packages and
features are introduced, and a ‘release’ branch where bug fixes and
relative stability are important; <em>CRAN</em> packages do not
distinguish between devel and release branches.</p>
<p>In the past, one would install a <em>Bioconductor</em> package by
evaluating the command <code>source("https://.../biocLite.R")</code> to
read a file from the web. The file contained an installation script that
was smart enough to figure out what version of <em>R</em> and
<em>Bioconductor</em> were in use or appropriate for the person invoking
the script. Sourcing an executable script from the web is an obvious
security problem.</p>
<p>Our solution is to use a CRAN package BiocManager, so that users
install from pre-configured CRAN mirrors rather than typing in a URL and
sourcing from the web.</p>
<p>But how does a CRAN package know what version of
<em>Bioconductor</em> is in use? Can we use BiocManager? No, because we
don’t have enough control over the version of BiocManager available on
CRAN, e.g., everyone using the same version of <em>R</em> would get the
same version of BiocManager and hence of <em>Bioconductor</em>. But
there are two <em>Bioconductor</em> versions per R version, so that does
not work!</p>
<p>BiocManager could write information to a cache on the user disk, but
this is not a robust solution for a number of reasons. Is there any
other way that <em>R</em> could keep track of version information? Yes,
by installing a <em>Bioconductor</em> package (BiocVersion) whose sole
purpose is to indicate the version of <em>Bioconductor</em> in use.</p>
<p>By default, BiocManager installs the BiocVersion package
corresponding to the most recent released version of
<em>Bioconductor</em> for the version of <em>R</em> in use. At the time
this section was written, the most recent version of R is R-3.6.1,
associated with <em>Bioconductor</em> release version 3.9. Hence on
first use of <code><a href="../reference/install.html">BiocManager::install()</a></code> we see BiocVersion
version 3.9.0 being installed.</p>
<pre><code>&gt; BiocManager::install()
Bioconductor version 3.9 (BiocManager 1.30.4), R 3.6.1 Patched (2019-07-06
  r76792)
Installing package(s) 'BiocVersion'
trying URL 'https://bioconductor.org/packages/3.9/bioc/src/contrib/\
    BiocVersion_3.9.0.tar.gz'
...</code></pre>
<p>Requesting a specific version of <em>Bioconductor</em> updates, if
possible, the BiocVersion package.</p>
<pre><code>&gt; ## 3.10 is available for R-3.6
&gt; BiocManager::install(version="3.10")
Upgrade 3 packages to Bioconductor version '3.10'? [y/n]: y
Bioconductor version 3.10 (BiocManager 1.30.4), R 3.6.1 Patched (2019-07-06
  r76792)
Installing package(s) 'BiocVersion'
trying URL 'https://bioconductor.org/packages/3.10/bioc/src/contrib/\
    BiocVersion_3.10.1.tar.gz'
...
&gt; ## back down again...
&gt; BiocManager::install(version="3.9")
Downgrade 3 packages to Bioconductor version '3.9'? [y/n]: y
Bioconductor version 3.9 (BiocManager 1.30.4), R 3.6.1 Patched (2019-07-06
  r76792)
Installing package(s) 'BiocVersion'
trying URL 'https://bioconductor.org/packages/3.9/bioc/src/contrib/\
    BiocVersion_3.9.0.tar.gz'
...</code></pre>
<p>Answering <code>n</code> to the prompt to up- or downgrade packages
leaves the installation unchanged, since this would immediately create
an inconsistent installation.</p>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<div class="section level3">
<h3 id="package-not-available">Package not available<a class="anchor" aria-label="anchor" href="#package-not-available"></a>
</h3>
<p>(An initial draft of this section was produced by ChatGPT on 25 May
2023)</p>
<p>A user failed to install the ‘celldex’ package on 25 May 2023. A
transcript of the <em>R</em> session is as follows:</p>
<pre><code>&gt; BiocManager::version()
[1] '3.18'
&gt; BiocManager::install("celldex")
Bioconductor version 3.18 (BiocManager 1.30.20), R 4.3.0 Patched (2023-05-01
  r84362)
Installing package(s) 'celldex'
Warning message:
package 'celldex' is not available for Bioconductor version '3.18'

A version of this package for your version of R might be available elsewhere,
see the ideas at
https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages</code></pre>
<p>The availability of specific packages within <em>Bioconductor</em>
can depend on various factors, including simple errors in entering the
package name, the package’s development status, maintenance, and
compatibility with the latest version of <em>Bioconductor</em>, as well
as the availability of CRAN packages that the <em>Bioconductor</em>
package depends on.</p>
<p>Package Name: <em>R</em> package names are case sensitive and must be
spelt correctly, so using <code>BiocManager::install("Celldex")</code>
(with a capital <code>C</code>) or
<code>BiocManager::install("celdex")</code> (with only one
<code>l</code>) would both fail to install <code>celldex</code>;
<em>R</em> will sometimes suggest the correct name.</p>
<p><em>CRAN</em> Packages: <code><a href="../reference/install.html">BiocManager::install()</a></code> tries to
install packages from CRAN and from <em>Bioconductor</em>. Check that
the package is not a CRAN package by trying to visit the CRAN ‘landing
page’</p>
<ul>
<li><code>https://cran.R-project.org/package=celldex</code></li>
</ul>
<p>If this page is found, then the package is a CRAN package; see the <a href="https://cran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages" class="external-link">R-admin</a>
manual section on troubleshooting CRAN package installations.</p>
<p>Check also that the package is not a CRAN package that has been
‘archived’ and no longer available by trying to visit</p>
<ul>
<li><code>https://cran.R-project.org/src/contrib/Archive/celldex/</code></li>
</ul>
<p>If this page exists but the ‘landing page’ does not, this means that
the package has been removed from CRAN. While it is possible to install
archived packages, usually the best course of action is to identify
alternative packages to accomplish the task you are interested in. This
is especially true if the ‘Last modified’ date of the most recent
archived package is more than several months ago.</p>
<p>Compatibility: A <em>Bioconductor</em> package must be available for
the specific version of <em>Bioconductor</em> you are using. Try
visiting the ‘landing page’ of the package for your version of
<em>Bioconductor</em>, e.g., for <em>Bioconductor</em> version 3.18 and
package celldex</p>
<ul>
<li><a href="https://bioconductor.org/packages/3.18/celldex" class="external-link uri">https://bioconductor.org/packages/3.18/celldex</a></li>
</ul>
<p>If this landing page does not exist, then the package is not
available for your version of <em>Bioconductor</em>.</p>
<p>Users may sometimes have an out-of-date version of <em>R</em> or
<em>Bioconductor</em> installed; this may be intentional (e.g., to
ensure reproducibility of existing analyses) or simply because
<em>Bioconductor</em> has not yet been updated. Try visiting the current
release landing page</p>
<ul>
<li><a href="https://bioconductor.org/packages/release/celldex" class="external-link uri">https://bioconductor.org/packages/release/celldex</a></li>
</ul>
<p>If the release landing page exists, and it is not important that you
continue using the out-of-date version of <em>Bioconductor</em>,
consider updating <em>R</em> (if necessary) and <em>Bioconductor</em> to
the current release versions using instructions at the top of this
document.</p>
<p>Packages recently contributed to <em>Bioconductor</em> are added to
the ‘devel’ branch, whereas most users are configured to use the
‘release’ branch. Try visiting the ‘devel’ landing page</p>
<ul>
<li><a href="https://bioconductor.org/packages/devel/celldex" class="external-link uri">https://bioconductor.org/packages/devel/celldex</a></li>
</ul>
<p>If only the devel landing page exists, then consider updating your
installation to use the development version of <em>Bioconductor</em>.
Note that the development version is not as stable as the release
version, so should not be used for time-critical or ‘production’
analysis.</p>
<p>It may be that the package you are interested in has been removed
from <em>Bioconductor</em>. Check this by visiting</p>
<ul>
<li><a href="https://bioconductor.org/about/removed-packages/" class="external-link uri">https://bioconductor.org/about/removed-packages/</a></li>
</ul>
<p>If the package has been removed, the best course of action is to
identify alternative packages to accomplish the task you are interested
in.</p>
<p>Maintenance and Operating System Availability: A package may be
included in the release or devel version of <em>Bioconductor</em>, but
currently unavailable because it requires maintenance. This might be
indicated by a red ‘build’ badge as in the image below (details of the
build problem are available by clicking on the badge). The build error
usually requires that the package maintainer correct an issue with their
package; the maintainer and email address are listed on the package
landing page.</p>
<p><img src="img/badges.png" width="100%"></p>
<p>A small number of <em>Bioconductor</em> packages are not available on
all operating systems. An orange ‘platforms’ badge indicates this. Click
on the badge to be taken to the ‘Package Archives’ section of the
landing page; BGmix is not supported on Windows, and not available on
‘Intel’ macOS because of build-related errors. Consider using an
alternative operating system if the package is essential to your
work</p>
<p><img src="img/archives.png" width="100%"></p>
<p>Packages with landing pages from older releases but not available for
your operating system cannot be updated by the maintainer. If the
package is available in the current release and for your operating
system, consider updating to the current release of
<em>Bioconductor</em>.</p>
</div>
<div class="section level3">
<h3 id="cannot-load-biocmanager">Cannot load <em>BiocManager</em><a class="anchor" aria-label="anchor" href="#cannot-load-biocmanager"></a>
</h3>
<p>After updating <em>R</em> (e.g., from <em>R</em> version 3.5.x to
<em>R</em> version 3.6.x at the time of writing this) and trying to load
<code>BiocManager</code>, <em>R</em> replies</p>
<pre><code>Error: .onLoad failed in loadNamespace() for 'BiocManager', details:
  call: NULL
  error: Bioconductor version '3.8' requires R version '3.5'; see
  https://bioconductor.org/install</code></pre>
<p>This problem arises because <code>BiocManager</code> uses a second
package, <code>BiocVersion</code>, to indicate the version of
<em>Bioconductor</em> in use. In the original installation,
<code>BiocManager</code> had installed <code>BiocVersion</code>
appropriate for <em>R</em> version 3.5. With the update, the version of
<em>Bioconductor</em> indicated by <code>BiocVersion</code> is no longer
valid – you’ll need to update <code>BiocVersion</code> and all
<em>Bioconductor</em> packages to the most recent version available for
your new version of <em>R</em>.</p>
<p>The recommended practice is to maintain a separate library for each
<em>R</em> and <em>Bioconductor</em> version. So instead of installing
packages into <em>R</em>’s system library (e.g., as ‘administrator’),
install only base <em>R</em> into the system location. Then use aliases
or other approaches to create <em>R</em> / <em>Bioconductor</em>
version-specific installations. This is described in the section on <a href="#multiple-versions">maintaining multiple versions</a> of
<em>R</em> and <em>Bioconductor</em>.</p>
<p>Alternatively, one could update all <em>Bioconductor</em> packages in
the previous installation directory. The problem with this is that the
previous version of <em>Bioconductor</em> is removed, compromising the
ability to reproduce earlier results. Update all <em>Bioconductor</em>
packages in the previous installation directory by removing <em>all</em>
versions of <code>BiocVersion</code></p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html" class="external-link">remove.packages</a></span><span class="op">(</span><span class="st">"BiocVersion"</span><span class="op">)</span>  <span class="co"># repeat until all instances removed</span></span></code></pre>
<p>Then install the updated <code>BiocVersion</code>, and update all
<em>Bioconductor</em> packages; answer ‘yes’ when you are asked to
update a potentially large number of <em>Bioconductor</em> packages.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/install.html">install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Confirm that the updated <em>Bioconductor</em> is valid for your
version of <em>R</em></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="../reference/valid.html">valid</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="timeout-during-package-download">Timeout during package download<a class="anchor" aria-label="anchor" href="#timeout-during-package-download"></a>
</h3>
<p>Large packages can take a long time to downloaded over poor internet
connects. The BiocManager package sets the time limit to 300 seconds,
using <code>options(timeout = 300)</code>. Only part of a package may
download, e.g., only 15.1 of 79.4 MB in the example below</p>
<pre><code>trying URL 'https://bioconductor.org/packages/3.12/data/annotation/src/contrib/org.Hs.eg.db_3.12.0.tar.gz'
Content type 'application/x-gzip' length 83225518 bytes (79.4 MB)
=========
downloaded 15.1 MB</code></pre>
<p>or perhaps with a warning (often difficult to see in the output)</p>
<pre><code>Error in download.file(url, destfile, method, mode = "wb", ...) :
...
...: Timeout of 300 seconds was reached
...</code></pre>
<p>Try increasing the download timeout, e.g,
<code>options(timeout = 600)</code>.</p>
</div>
<div class="section level3">
<h3 id="multiple-biocversion-installations">Multiple <code>BiocVersion</code> installations<a class="anchor" aria-label="anchor" href="#multiple-biocversion-installations"></a>
</h3>
<p>One potential problem occurs when there are two or more
<code><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths()</a></code>, with more than one BiocVersion package
installed. This might occur for instance if a ‘system administrator’
installed BiocVersion, and then a user installed their own version. In
this circumstance, it seems appropriate to standardize the installation
by repeatedly calling <code>remove.packages("BiocVersion")</code> until
all versions are removed, and then installing the desired version.</p>
</div>
<div class="section level3">
<h3 id="errors-determining-bioconductor-version">Errors determining <em>Bioconductor</em> version<a class="anchor" aria-label="anchor" href="#errors-determining-bioconductor-version"></a>
</h3>
<p>An essential task for <em>BiocManager</em> is to determine that the
version of <em>Bioconductor</em> is appropriate for the version of
<em>R</em>. Several errors can occur when this task fails.</p>
<ul>
<li><p>Bioconductor version cannot be determined; no internet
connection? When the <em>Bioconductor</em> version cannot be obtained
from the version map hosted at <a href="https://bioconductor.org/config.yaml" class="external-link uri">https://bioconductor.org/config.yaml</a>, this error will
occur. It may be a result of poor internet connectivity or offline use.
See the <a href="#offline-config.yaml">offline config.yaml</a> section
above.</p></li>
<li><p>Bioconductor version cannot be validated; no internet connection?
Usually occurs when the map is unable to be downloaded possibly due to a
missing <code>BIOCONDUCTOR_CONFIG_FILE</code>. For offline use, a copy
of the configuration file should be downloaded and its address set to
the environment variable or option.</p></li>
<li><p>Bioconductor version map cannot be validated; is it
misconfigured? On <em>rare</em> occasion, the version map hosted at <a href="https://bioconductor.org/config.yaml" class="external-link uri">https://bioconductor.org/config.yaml</a> may be
misconfigured. The check ensures that all the version name tags, i.e.,
out-of-date, release, devel, and future are in the map.</p></li>
<li><p>Bioconductor version cannot be validated; is type input
mis-specified? The type input refers to the version name inputs, mainly
release and devel. This error is chiefly due to internal logic and is
not due to user error. Please open a <a href="https://github.com/Bioconductor/BiocManager/issues" class="external-link">GitHub
issue</a>.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="session-information">Session information<a class="anchor" aria-label="anchor" href="#session-information"></a>
</h2>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## R version 4.3.3 (2024-02-29)</span></span>
<span><span class="co">## Platform: x86_64-pc-linux-gnu (64-bit)</span></span>
<span><span class="co">## Running under: Ubuntu 22.04.4 LTS</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Matrix products: default</span></span>
<span><span class="co">## BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">## LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## locale:</span></span>
<span><span class="co">##  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">##  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">##  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">## [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## time zone: UTC</span></span>
<span><span class="co">## tzcode source: system (glibc)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## attached base packages:</span></span>
<span><span class="co">## [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## other attached packages:</span></span>
<span><span class="co">## [1] BiocStyle_2.30.0</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## loaded via a namespace (and not attached):</span></span>
<span><span class="co">##  [1] vctrs_0.6.5           cli_3.6.2             knitr_1.45           </span></span>
<span><span class="co">##  [4] rlang_1.1.3           xfun_0.42             highr_0.10           </span></span>
<span><span class="co">##  [7] purrr_1.0.2           textshaping_0.3.7     jsonlite_1.8.8       </span></span>
<span><span class="co">## [10] htmltools_0.5.7       ragg_1.3.0            sass_0.4.8           </span></span>
<span><span class="co">## [13] rmarkdown_2.26        evaluate_0.23         jquerylib_0.1.4      </span></span>
<span><span class="co">## [16] fastmap_1.1.1         yaml_2.3.8            lifecycle_1.0.4      </span></span>
<span><span class="co">## [19] memoise_2.0.1         bookdown_0.38         BiocManager_1.30.22.4</span></span>
<span><span class="co">## [22] compiler_4.3.3        fs_1.6.3              systemfonts_1.0.6    </span></span>
<span><span class="co">## [25] digest_0.6.35         R6_2.5.1              magrittr_2.0.3       </span></span>
<span><span class="co">## [28] bslib_0.6.1           tools_4.3.3           pkgdown_2.0.7        </span></span>
<span><span class="co">## [31] cachem_1.0.8          desc_1.4.3</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Morgan, Marcel Ramos.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
